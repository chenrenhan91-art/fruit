<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>ä½ çš„æ°´æœäººæ ¼ç»é…æ˜¯è°ï¼Ÿ</title>

  <!-- ç§»åŠ¨ç«¯é€‚é… -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="format-detection" content="telephone=no,email=no" />
  <!-- å‡å°‘å¤–é“¾ä¿¡æ¯ï¼Œå…¼å®¹å¾®ä¿¡ -->
  <meta name="referrer" content="no-referrer" />

  <!-- Tailwind CDN -->
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, system-ui,
                   "PingFang SC", "Hiragino Sans GB", "STHeiti",
                   "Microsoft YaHei", sans-serif;
      background-color: #000;
      color: #fff;
      overflow-x: hidden;
    }

    .serif {
      font-family: "STSong", "Songti SC", "FangSong",
                   "Noto Serif CJK SC", serif;
    }

    img { user-select: none; -webkit-user-drag: none; }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to   { opacity: 1; transform: translateY(0); }
    }
    .animate-fade-in { animation: fadeIn 0.8s ease-out forwards; }

    @keyframes spin-slow {
      from { transform: rotate(0deg); }
      to   { transform: rotate(360deg); }
    }
    .animate-spin-slow { animation: spin-slow 8s linear infinite; }

    @keyframes bgHeroFloat {
      0%   { transform: scale(1) translateY(0); }
      50%  { transform: scale(1.06) translateY(-8px); }
      100% { transform: scale(1) translateY(0); }
    }
    .bg-hero-animate {
      animation: bgHeroFloat 14s ease-in-out infinite;
      transform-origin: center center;
      will-change: transform;
    }

    .star-twinkle-layer {
      position: absolute;
      inset: 0;
      background-image:
        radial-gradient(circle at 10% 20%, rgba(255,255,255,0.70) 0, rgba(255,255,255,0) 45%),
        radial-gradient(circle at 80% 30%, rgba(255,230,180,0.8) 0, rgba(255,230,180,0) 50%),
        radial-gradient(circle at 20% 80%, rgba(150,200,255,0.7) 0, rgba(150,200,255,0) 55%);
      mix-blend-mode: screen;
      opacity: 0.28;
      animation: starTwinkle 6s ease-in-out infinite alternate;
      pointer-events: none;
    }
    @keyframes starTwinkle {
      0%   { opacity: 0.1; transform: translate3d(0,0,0) scale(1); }
      50%  { opacity: 0.35; transform: translate3d(3px,-4px,0) scale(1.03); }
      100% { opacity: 0.18; transform: translate3d(-2px,3px,0) scale(1.01); }
    }

    @media (prefers-reduced-motion: reduce) {
      .bg-hero-animate,
      .star-twinkle-layer,
      .animate-fade-in,
      .animate-spin-slow {
        animation: none !important;
        transform: none !important;
      }
    }

    .safe-top { padding-top: env(safe-area-inset-top); }
    .safe-bottom { padding-bottom: env(safe-area-inset-bottom); }
  </style>
</head>

<body class="flex justify-center min-h-screen">

  <!-- æ‰‹æœºå±å¹•å®¹å™¨ -->
  <div id="app" class="w-full max-w-[450px] bg-black relative shadow-2xl min-h-screen flex flex-col">

    <!-- å¼€å±èƒŒæ™¯ï¼ˆåŠ¨æ€ï¼‰ -->
    <div class="absolute inset-0 z-0 pointer-events-none">
      <div class="w-full h-full relative overflow-hidden">
        <!-- å¼€å±èƒŒæ™¯å›¾ -->
        <img src="opening-bg.jpg" alt=""
             class="w-full h-full object-cover opacity-80 bg-hero-animate"
             style="filter: saturate(1.1) contrast(1.05);">
        <div class="absolute inset-0 bg-gradient-to-b from-black/40 via-black/55 to-black/90"></div>
        <div class="star-twinkle-layer"></div>
      </div>
    </div>

    <!-- å†…å®¹å®¹å™¨ -->
    <div id="content" class="relative z-10 w-full flex-1 flex flex-col safe-top safe-bottom"></div>

    <!-- å¾®ä¿¡é¡¶éƒ¨æç¤º -->
    <div id="wx-tip"
         class="hidden fixed top-0 left-0 right-0 z-30 bg-black/80 text-white text-[11px] px-4 py-2 text-center">
      åœ¨å¾®ä¿¡ä¸­æµè§ˆæ—¶ï¼Œæ¨èç‚¹å‡»å³ä¸Šè§’ â€œÂ·Â·Â·â€ ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ï¼Œä½“éªŒæ›´æµç•… ğŸ‘
    </div>
  </div>

<script>
/* ================== i18n è¯­è¨€çŠ¶æ€ ================== */
const LANG_KEY = "fruit_lang";
let currentState = {
  view: "start",
  currentQ: 0,
  answers: [],
  finalResult: null,
  lang: localStorage.getItem(LANG_KEY) || "zh"
};

function setLang(lang) {
  currentState.lang = lang;
  localStorage.setItem(LANG_KEY, lang);
  document.title = currentState.lang === "zh"
    ? "ä½ çš„æ°´æœäººæ ¼ç»é…æ˜¯è°ï¼Ÿ"
    : "Who Is Your Perfect Fruit Personality Match?";
  render();
}

function pick(obj) {
  if (!obj) return "";
  return obj[currentState.lang] ?? obj.zh ?? "";
}

const UI = {
  brandLine: { zh: "ROACYZHENG Â· FRUIT UNIVERSE", en: "ROACYZHENG Â· FRUIT UNIVERSE" },
  heroTitle1: { zh: "ä½ çš„", en: "Your" },
  heroTitle2: { zh: "æ°´æœäººæ ¼", en: "Fruit Personality" },
  heroTitle3: { zh: "ç»é…æ˜¯è°ï¼Ÿ", en: "Perfect Match?" },

  intro: {
    zh: "åœ¨è‰ºæœ¯å®¶ <span class=\"font-semibold\">éƒ‘å†²</span> çš„ã€Œæ°´æœå®‡å®™ã€é‡Œï¼Œ<br/>æ¯ä¸€é¢—æœå®ï¼Œéƒ½æ˜¯ä¸€ä¸ªçµé­‚çš„éšå–»ã€‚",
    en: "In artist <span class=\"font-semibold\">Zheng Chong</span>'s â€œFruit Universeâ€,<br/>every fruit is a metaphor for a soul."
  },

  hint: {
    zh: "èŠ± 1 åˆ†é’Ÿç­” 6 é¢˜ï¼Œçœ‹çœ‹ä½ æ˜¯å“ªä¸ªæ°´æœäººæ ¼ï¼Œä»¥åŠå‘½ä¸­æ³¨å®šçš„é‚£é¢—ã€Œç»é…æœã€æ˜¯è°ã€‚",
    en: "Answer 6 quick questions in 1 minute to discover your fruit personalityâ€”and your destined soulmate fruit."
  },

  btnStart: { zh: "å¼€å§‹åˆ‡å¼€çµé­‚ â†’", en: "Start the Soul Cut â†’" },
  shareLine: { zh: "SCREENSHOT Â· SHARE Â· TAG @ROACYZHENG", en: "SCREENSHOT Â· SHARE Â· TAG @ROACYZHENG" },

  quizTag: { zh: "æ°´æœæµ‹è¯•", en: "FRUIT TEST" },
  qLabel: { zh: "ç¬¬", en: "Question" },
  qLabel2: { zh: "é¢˜", en: "" },
  tipQuick: {
    zh: "ä¸ç”¨åå¤çº ç»“ï¼Œç¬¬ä¸€ååº”é€šå¸¸å°±æ˜¯ä½ çœŸå®çš„æ°´æœå†…æ ¸ã€‚",
    en: "Donâ€™t overthink itâ€”your first instinct is usually your true fruit core."
  },

  loading: { zh: "æ­£åœ¨åˆ‡å¼€çµé­‚...", en: "Slicing your soul..." },

  restart: { zh: "é‡æ–°æµ‹è¯•", en: "Retake" },
  resultLead: { zh: "ä½ çš„ç»é…æ°´æœäººæ ¼æ˜¯", en: "Your soulmate fruit personality is" },
  analysisTitle: { zh: "äººæ ¼åˆ‡ç‰‡ Â· Analysis", en: "Personality Slice Â· Analysis" },

  joinTitle: { zh: "åŠ å…¥ã€Œæ°´æœå®‡å®™ã€å°ç¾¤", en: "Join the â€œFruit Universeâ€ Group" },
  joinDesc: {
    zh: "æ‰«ææˆ–é•¿æŒ‰è¯†åˆ«ä¸‹æ–¹äºŒç»´ç ï¼Œ<br/>å’Œæ›´å¤šæ°´æœäººæ ¼ä¸€èµ·èŠå¤©ã€æ™’å›¾ğŸ‘",
    en: "Scan or long-press the QR code below<br/>to chat & share with more fruit personalities ğŸ‘"
  },
  joinTip: {
    zh: "åœ¨å¾®ä¿¡ä¸­å¯ä»¥é•¿æŒ‰äºŒç»´ç å›¾ç‰‡è¯†åˆ«åŠ å…¥ï¼›<br/>ä¹Ÿå¯ä»¥é•¿æŒ‰å…¨å±æˆªå›¾ï¼Œå‘åˆ°æœ‹å‹åœˆ / ç¾¤èŠåˆ†äº«ä½ çš„æ°´æœäººæ ¼ã€‚",
    en: "In WeChat, long-press the QR image to join.<br/>Or share a full-screen screenshot to Moments / chats."
  },
  footerShare: {
    zh: "Â· é•¿æŒ‰æˆªå›¾ï¼Œä¿å­˜ä½ çš„æ°´æœäººæ ¼ Â·<br/>æ¬¢è¿åˆ†äº«åˆ°ç¤¾äº¤å¹³å°ï¼Œtag <span class=\"font-semibold\">@ROACYZHENG</span>",
    en: "Â· Long-press to save your result screenshot Â·<br/>Share it anywhere and tag <span class=\"font-semibold\">@ROACYZHENG</span>"
  },

  wxTip: {
    zh: "åœ¨å¾®ä¿¡ä¸­æµè§ˆæ—¶ï¼Œæ¨èç‚¹å‡»å³ä¸Šè§’ â€œÂ·Â·Â·â€ ä½¿ç”¨æµè§ˆå™¨æ‰“å¼€ï¼Œä½“éªŒæ›´æµç•… ğŸ‘",
    en: "In WeChat, tap â€œÂ·Â·Â·â€ â†’ Open in Browser for a smoother experience ğŸ‘"
  }
};

/* ================== é¢˜ç›®ï¼ˆåŒè¯­ï¼‰================== */
const questions = [
  {
    id: 1,
    question: { zh: "ä½ çš„èƒ½é‡æ¥è‡ªå“ªé‡Œï¼Ÿ", en: "Where does your energy come from?" },
    options: [
      { text: { zh: "A. è¢«äººçœ‹è§ã€è¢«è®¤å¯", en: "A. Being seen and recognized" }, weights: ["peach", "cherry"] },
      { text: { zh: "B. ç‹¬å¤„æ—¶çš„çµæ„Ÿå’Œå¹»æƒ³", en: "B. Ideas & fantasies in solitude" }, weights: ["kiwi", "watermelon"] },
      { text: { zh: "C. å¸®åŠ©åˆ«äººã€å¸¦æ¥æ¸©æš–", en: "C. Helping others, bringing warmth" }, weights: ["lemon", "pomegranate"] }
    ]
  },
  {
    id: 2,
    question: { zh: "å½“æƒ…ç»ªä½è½æ—¶ï¼Œä½ ä¼šï¼Ÿ", en: "When you feel down, you tend toâ€¦" },
    options: [
      { text: { zh: "A. ç”¨ç¬‘æ©é¥°ä¸€åˆ‡ï¼Œå‡è£…æ²¡äº‹", en: "A. Cover it with jokes, act like I'm fine" }, weights: ["orange", "pineapple"] },
      { text: { zh: "B. è¿œç¦»äººç¾¤ï¼Œç‹¬è‡ªç–—æ„ˆ", en: "B. Step away and heal alone" }, weights: ["lemon", "dragonfruit"] },
      { text: { zh: "C. å»åšç‚¹æœ‰è¶£çš„äº‹è®©è‡ªå·±åŠ¨èµ·æ¥", en: "C. Do something fun to get moving" }, weights: ["peach", "guava"] }
    ]
  },
  {
    id: 3,
    question: { zh: "åœ¨äººç¾¤ä¸­ï¼Œä½ é€šå¸¸æ˜¯ï¼Ÿ", en: "In a crowd, you are usuallyâ€¦" },
    options: [
      { text: { zh: "A. æ´»è·ƒçš„ä¸­å¿ƒäººç‰©", en: "A. The lively center of attention" }, weights: ["peach", "orange"] },
      { text: { zh: "B. å†·é™è§‚å¯Ÿè€…", en: "B. The calm observer" }, weights: ["kiwi", "sugarcane", "starfruit"] },
      { text: { zh: "C. è‡ªç„¶æµéœ²é­…åŠ›ï¼Œä¸åˆ»æ„ä½†è¢«å–œæ¬¢", en: "C. Effortlessly charmingâ€”liked without trying" }, weights: ["pineapple", "watermelon"] }
    ]
  },
  {
    id: 4,
    question: { zh: "ä½ æ›´ç›¸ä¿¡å“ªç§å¹¸ç¦ï¼Ÿ", en: "Which kind of happiness do you believe in more?" },
    options: [
      { text: { zh: "A. çƒ­çƒˆä¸”çŸ­æš‚çš„ç¬é—´", en: "A. Intense, fleeting moments" }, weights: ["peach", "cherry"] },
      { text: { zh: "B. é•¿ä¹…ç¨³å®šçš„é™ªä¼´", en: "B. Long, steady companionship" }, weights: ["pomegranate", "lemon"] },
      { text: { zh: "C. ç‹¬è‡ªä¹Ÿèƒ½å‘å…‰çš„è‡ªç”±", en: "C. Freedom to shine even alone" }, weights: ["kiwi", "guava", "dragonfruit"] }
    ]
  },
  {
    id: 5,
    question: { zh: "å¦‚æœç”¨ä¸€å¥è¯å½¢å®¹ä½ çš„äººç”Ÿæ€åº¦ï¼š", en: "One sentence to describe your life attitude:" },
    options: [
      { text: { zh: "A. â€œæˆ‘æƒ³è¢«çœ‹è§ã€‚â€", en: 'A. "I want to be seen."' }, weights: ["peach", "cherry"] },
      { text: { zh: "B. â€œæˆ‘ä¸å®Œç¾ï¼Œä½†æˆ‘è‡ªç”±ã€‚â€", en: 'B. "Iâ€™m not perfect, but Iâ€™m free."' }, weights: ["guava", "dragonfruit"] },
      { text: { zh: "C. â€œæˆ‘ç”¨çˆ±å»ä¿®å¤ä¸€åˆ‡ã€‚â€", en: 'C. "I heal everything with love."' }, weights: ["lemon", "pomegranate"] }
    ]
  },
  {
    id: 6,
    question: { zh: "ä½ æœ€æ¸´æœ›åˆ«äººæ€æ ·çœ‹ä½ ï¼Ÿ", en: "How do you most want others to see you?" },
    options: [
      { text: { zh: "A. é…·ã€æœ‰è¶£ã€ç‹¬ç‰¹", en: "A. Cool, fun, unique" }, weights: ["kiwi", "starfruit", "pineapple"] },
      { text: { zh: "B. æ¸©æŸ”ã€æœ‰æ·±åº¦", en: "B. Gentle, deep" }, weights: ["lemon", "pomegranate", "dragonfruit"] },
      { text: { zh: "C. è‡ªä¿¡ã€é—ªäº®ã€éš¾ä»¥å¿˜è®°", en: "C. Confident, shining, unforgettable" }, weights: ["peach", "cherry", "orange"] }
    ]
  }
];

/* ================== ç»“æœï¼ˆåŒè¯­å­—æ®µï¼‰================== */
const results = {
  peach: {
    img: "peach.jpg", icon: "ğŸ‘",
    name: { zh: "æ¡ƒå­äººæ ¼", en: "Peach" },
    artwork: { zh: "ç”»ä½œã€Šæ¡ƒé†‰ã€‹", en: "Artwork: â€œPeach Drunkâ€" },
    title: { zh: "è¢«çœ‹è§çš„è‰ºæœ¯å®¶", en: "The Seen Artist" },
    keywords: [{ zh:"æŸ”è½¯", en:"Soft" },{ zh:"å¤–å‘", en:"Outgoing" },{ zh:"å¾®å­¤ç‹¬", en:"Quietly Lonely" }],
    quote: { zh: "â€œæˆ‘å‡†å¤‡å¥½äº†è¢«çœ‹è§ã€‚â€", en: '"Iâ€™m ready to be seen."' },
    desc: {
      zh: "ç”œç¾åˆæœ‰ç‚¹å±é™©ï¼Œç¤¾äº¤é«˜æ‰‹ã€çµé­‚å­¤ç‹¬ã€‚ä½ è¯»æ‡‚åˆ«äººï¼Œä¹Ÿå¶å°”è¯»ä¸æ‡‚è‡ªå·±ï¼Œåœ¨è¢«å›´è§‚å’Œè¢«ç†è§£ä¹‹é—´æ¥å›æ‘‡æ‘†ã€‚",
      en: "Sweet with a hint of dangerâ€”socially fluent, privately lonely. You read people well, yet sometimes canâ€™t read yourself, swinging between being watched and being understood."
    },
    matchKey: "lemon",
    matchLine: { zh: "ä»–æ˜¯é…¸çš„è§£è¯ï¼Œä½ æ˜¯ç”œçš„å¼•çº¿ã€‚", en: "Theyâ€™re the antidote to your sweetnessâ€”and you ignite their spark." }
  },
  lemon: {
    img: "lemon.jpg", icon: "ğŸ‹",
    name: { zh: "æŸ æª¬äººæ ¼", en: "Lemon" },
    artwork: { zh: "ç”»ä½œã€ŠLemonçš„æ•‘èµã€‹", en: "Artwork: â€œLemon Redemptionâ€" },
    title: { zh: "é…¸æ¶©çš„æ®‰é“è€…", en: "The Sober Healer" },
    keywords: [{ zh:"æ¸…é†’", en:"Clear-eyed" },{ zh:"ç–—æ„ˆ", en:"Healing" },{ zh:"å¾®å…‰", en:"A Glimmer" }],
    quote: { zh: "â€œé»‘å¤œè¶Šæ·±ï¼Œé…¸æ¥šè¶Šäº®ã€‚â€", en: '"The darker the night, the brighter the tartness."' },
    desc: {
      zh: "ä½ æ˜¯åˆ€é”‹ä¸‹çš„æ¸©æŸ”æ²»æ„ˆè€…ã€‚çœ‹å¾—å¾ˆæ¸…æ¥šï¼Œä¹Ÿæ„Ÿå—å¾—å¾ˆæ·±ã€‚ä½ æ‡‚æ‰€æœ‰äººçš„éš¾ï¼Œå´å¾ˆå°‘æ‰¿è®¤è‡ªå·±çš„ç´¯ã€‚",
      en: "A gentle healer with a sharp edge. You see clearly and feel deeply. You understand everyoneâ€™s struggles, but rarely admit your own exhaustion."
    },
    matchKey: "peach",
    matchLine: { zh: "ä¸€ä¸ªæ•¢çˆ±ï¼Œä¸€ä¸ªæ•¢æ•‘ã€‚", en: "One dares to love; the other dares to save." }
  },
  cherry: {
    img: "cherry.jpg", icon: "ğŸ’",
    name: { zh: "è½¦å˜å­äººæ ¼", en: "Cherry" },
    artwork: { zh: "ç”»ä½œã€Šè½¦å˜å­åˆè§ã€‹", en: "Artwork: â€œCherry, First Sightâ€" },
    title: { zh: "ç²¾è‡´çš„å¹»æ¢¦å¨ƒå¨ƒ", en: "The Polished Dream Doll" },
    keywords: [{ zh:"å®Œç¾ä¸»ä¹‰", en:"Perfectionist" },{ zh:"è¢«å‡è§†", en:"Under Gaze" },{ zh:"èº«ä»½ç„¦è™‘", en:"Identity Anxiety" }],
    quote: { zh: "â€œæˆ‘é—ªè€€ï¼Œä¹Ÿæ˜“ç¢ã€‚â€", en: '"I shineâ€”and I crack easily."' },
    desc: {
      zh: "ä½ å¤©ç”Ÿå¸¦ç€é•œå¤´æ„Ÿï¼Œèµ°åˆ°å“ªé‡Œéƒ½æ˜¯ç„¦ç‚¹ã€‚ä½†è¶Šè¢«çœ‹è§ï¼Œå°±è¶Šæ€•æš´éœ²è„†å¼±ã€‚ä½ åœ¨é—ªè€€ä¸è‡ªæˆ‘æ€€ç–‘ä¸­åå¤åˆ‡æ¢ã€‚",
      en: "Born camera-readyâ€”always a focal point. But the more youâ€™re seen, the more you fear being exposed. You toggle between radiance and self-doubt."
    },
    matchKey: "starfruit",
    matchLine: { zh: "æ£±è§’ä¸å…‰ç¯çš„æ‹¥æŠ±ã€‚", en: "Edges embracing the halo." }
  },
  pineapple: {
    img:"pineapple.jpg", icon:"ğŸ",
    name:{ zh:"è èäººæ ¼", en:"Pineapple" },
    artwork:{ zh:"ç”»ä½œã€Šå¤§å¤è èã€‹", en:"Artwork: â€œSummer Pineappleâ€" },
    title:{ zh:"åˆ€é”‹ä¸Šçš„æ¸©æŸ”è´µæ—", en:"The Gentle Aristocrat with Spikes" },
    keywords:[{ zh:"é‡å¿ƒ", en:"Ambition" },{ zh:"è‡ªå¾‹", en:"Discipline" },{ zh:"éšå¿", en:"Restraint" }],
    quote:{ zh:"â€œæˆ‘ç¬‘ç€è¢«åˆ‡å¼€ï¼Œå› ä¸ºæˆ‘æœ‰é‡‘è‰²çš„å¿ƒã€‚â€", en:'"I smile as Iâ€™m cutâ€”because my heart is golden."' },
    desc:{ zh:"ä½ å¼ºå¤§ã€æ¸…é†’ã€ç›®æ ‡æ˜ç¡®ã€‚åˆ«äººçœ‹åˆ°çš„æ˜¯ä½ çš„åˆºï¼Œå´å¿½ç•¥ä½ å†…é‡Œçš„é¦™å’Œç”œã€‚", en:"Strong, lucid, goal-driven. People notice your spikes, but miss your fragrance and sweetness inside." },
    matchKey:"watermelon",
    matchLine:{ zh:"åˆ€ä¸æœè‚‰ï¼Œäº’ä¸ºæŸ”è½¯ã€‚", en:"Blade and fruitâ€”softening each other." }
  },
  kiwi:{
    img:"kiwi.jpg", icon:"ğŸ¥",
    name:{ zh:"å¥‡å¼‚æœäººæ ¼", en:"Kiwi" },
    artwork:{ zh:"ç”»ä½œã€Šå¥‡å¼‚æœé‡Œçš„åŸƒå¾·åˆ©æ‰å²›ã€‹", en:"Artwork: â€œEdeliza Island in Kiwiâ€" },
    title:{ zh:"å­¤å²›å¤©æ‰", en:"The Island Genius" },
    keywords:[{ zh:"ç‹¬ç«‹", en:"Independent" },{ zh:"å†…æ•›", en:"Reserved" },{ zh:"çµæ„Ÿ", en:"Inspired" }],
    quote:{ zh:"â€œæ€ªï¼Œä¹Ÿæ˜¯ä¸€ç§å¤©èµ‹ã€‚â€", en:'"Weird is a kind of talent."' },
    desc:{ zh:"ä½ æ˜¯æœ‰ç‚¹æ¯›èºã€åˆå¾ˆé€šé€çš„è‰ºæœ¯æ€ªèƒã€‚ä¸–ç•Œä¸ä¸€å®šæ‡‚ä½ ï¼Œä½†çµæ„Ÿæ°¸è¿œç«™åœ¨ä½ è¿™è¾¹ã€‚", en:"A slightly rough, deeply perceptive art weirdo. The world may not get you, but inspiration always does." },
    matchKey:"dragonfruit",
    matchLine:{ zh:"ç†æ€§ä¸è‰³ä¸½çš„å’Œå¼¦ã€‚", en:"A chord of reason and flamboyance." }
  },
  guava:{
    img:"guava.jpg", icon:"ğŸ¥­",
    name:{ zh:"èŠ­ä¹äººæ ¼", en:"Guava" },
    artwork:{ zh:"ç”»ä½œã€ŠèŠ­ä¹å°±æ˜¯å¿«ä¹çš„ä¹ã€‹", en:"Artwork: â€œGuava = Joyâ€" },
    title:{ zh:"é‡è›®å¥³ç‹", en:"The Wild Queen" },
    keywords:[{ zh:"çƒ­çƒˆ", en:"Fiery" },{ zh:"è‰æ ¹", en:"Grounded" },{ zh:"åå›", en:"Rebellious" }],
    quote:{ zh:"â€œæˆ‘ä¸å®Œç¾ï¼Œä½†æˆ‘çœŸå®ã€‚â€", en:'"Iâ€™m not perfect, but Iâ€™m real."' },
    desc:{ zh:"ä½ ä»ä¸ä¼ªè£…ï¼Œæƒ…ç»ªæ¥å°±æ¥ï¼Œèµ°å°±èµ°ã€‚ä½ æ˜¯äººç¾¤é‡Œæœ€åµé—¹çš„ä¸€é¢—å¿ƒï¼Œä¹Ÿæ˜¯æœ€çœŸè¯šçš„ä¸€é¢—å¿ƒã€‚", en:"No masks. Emotions come and go freely. Youâ€™re the loudest heart in the roomâ€”and often the most sincere." },
    matchKey:"pomegranate",
    matchLine:{ zh:"é‡ä¸æŸ”çš„å¹³è¡¡ã€‚", en:"Wild meets gentleâ€”perfect balance." }
  },
  pomegranate:{
    img:"pomegranate.jpg", icon:"ğŸ…",
    name:{ zh:"çŸ³æ¦´äººæ ¼", en:"Pomegranate" },
    artwork:{ zh:"ç”»ä½œã€ŠçŸ³æ¦´è£™ä¸‹ã€‹", en:"Artwork: â€œUnder the Pomegranate Skirtâ€" },
    title:{ zh:"è¢«èµç¾çš„ç‰ºç‰²è€…", en:"The Praised Martyr" },
    keywords:[{ zh:"æ¯æ€§", en:"Nurturing" },{ zh:"æ‰¿å—", en:"Enduring" },{ zh:"é‡ç”Ÿ", en:"Rebirth" }],
    quote:{ zh:"â€œæˆ‘çˆ±æ‰€æœ‰äººï¼Œä¹Ÿæƒ³è¢«è‡ªå·±çˆ±ã€‚â€", en:'"I love everyoneâ€”and Iâ€™m learning to love myself."' },
    desc:{ zh:"ä½ æ€»æ˜¯å…ˆç…§é¡¾åˆ«äººï¼Œå†æƒ³èµ·è‡ªå·±ã€‚ä½ æ“…é•¿ä»˜å‡ºï¼Œä¹Ÿåœ¨å­¦ç€æ‹’ç»ã€‚ä½ çš„æ¸©æŸ”ä¸æ˜¯å¤©ç”Ÿçš„è®¨å¥½ï¼Œè€Œæ˜¯è¢«ç£¨å‡ºæ¥çš„åŠ›é‡ã€‚", en:"You care for others first and remember yourself later. You give easily, and youâ€™re learning to say no. Your gentleness isnâ€™t people-pleasingâ€”itâ€™s strength forged over time." },
    matchKey:"guava",
    matchLine:{ zh:"ä¸€ä¸ªæ•™å¯¹æ–¹æ´»ï¼Œä¸€ä¸ªæ•™å¯¹æ–¹çˆ±ã€‚", en:"One teaches how to live; the other teaches how to love." }
  },
  sugarcane:{
    img:"sugarcane.jpg", icon:"ğŸ§ƒ",
    name:{ zh:"ç”˜è”—äººæ ¼", en:"Sugarcane" },
    artwork:{ zh:"ç”»ä½œã€Šç”˜è”—å¾®ç”œã€‹", en:"Artwork: â€œSugarcane, Lightly Sweetâ€" },
    title:{ zh:"ç”œçš„å¥‰çŒ®è€…", en:"The Sweet Giver" },
    keywords:[{ zh:"æ¸©é¡º", en:"Gentle" },{ zh:"éšå¿", en:"Contained" },{ zh:"è‹é†’", en:"Awakening" }],
    quote:{ zh:"â€œè¿™æ¬¡ï¼Œæˆ‘ä¸ºè‡ªå·±ç”œã€‚â€", en:'"This time, Iâ€™m sweet for myself."' },
    desc:{ zh:"ä½ ä¹ æƒ¯æŠŠå¥½ä¸œè¥¿ç•™ç»™åˆ«äººï¼ŒæŠŠå‹åŠ›ç•™ç»™è‡ªå·±ã€‚ç›´åˆ°æœ‰ä¸€å¤©ï¼Œä½ ç»ˆäºæ„è¯†åˆ°ï¼šä½ çš„ç”œï¼Œä¹Ÿå¯ä»¥åªä¸ºè‡ªå·±ä¿ç•™ã€‚", en:"You save the good parts for others and keep the pressure for yourselfâ€”until one day you realize your sweetness can be reserved for you, too." },
    matchKey:"pineapple",
    matchLine:{ zh:"ç”œé‡ä¸Šåˆºï¼Œæ‰æˆå°±å®Œæ•´çš„å‘³é“ã€‚", en:"Sweet meets spikesâ€”making a whole flavor." }
  },
  watermelon:{
    img:"watermelon.jpg", icon:"ğŸ‰",
    name:{ zh:"è¥¿ç“œäººæ ¼", en:"Watermelon" },
    artwork:{ zh:"ç”»ä½œã€Šç“œä¿ç”œæ˜Ÿçƒå¿ƒè„ä¿ç†Ÿã€‹", en:"Artwork: â€œSweet Planet, Ripe Heartâ€" },
    title:{ zh:"å®‡å®™æµªæ¼«å®¶", en:"The Cosmic Romantic" },
    keywords:[{ zh:"æµåŠ¨", en:"Flowing" },{ zh:"æ¬¢ä¹", en:"Joyful" },{ zh:"å®½å®¹", en:"Open-hearted" }],
    quote:{ zh:"â€œæˆ‘ä¸æ€•è™šæ— ï¼Œå› ä¸ºæˆ‘è‡ªå¸¦å¼•åŠ›ã€‚â€", en:'"I donâ€™t fear the voidâ€”I have my own gravity."' },
    desc:{ zh:"ä½ è‡ªç”±ã€æ¾å¼›ã€å¯¹ä¸–ç•Œä¿æŒå¥½å¥‡å¿ƒã€‚ä½ ä¸å¼ºæ±‚åˆ«äººç•™ä¸‹ï¼Œä½†æ„¿æ„ä¸ºå–œæ¬¢çš„äººä¸€ç›´äº®ç€ã€‚", en:"Free, relaxed, and curious about the world. You donâ€™t force people to stay, but you keep a light on for those you love." },
    matchKey:"pineapple",
    matchLine:{ zh:"é˜³å…‰æ’ä¸Šé‡‘è‰²ã€‚ä½ è®©TAè½¯ä¸€ç‚¹ï¼ŒTAè®©ä½ ç¨³ä¸€ç‚¹ã€‚", en:"Sunlight hits goldâ€”you soften them; they steady you." }
  },
  dragonfruit:{
    img:"dragonfruit.jpg", icon:"ğŸ‰",
    name:{ zh:"ç«é¾™æœäººæ ¼", en:"Dragonfruit" },
    artwork:{ zh:"ç”»ä½œã€Šç™½èŠ¯ç«é¾™æœçš„è‡´å‘½ä¸€å‡»ã€‹", en:"Artwork: â€œDeadly Strike of White-Heart Dragonfruitâ€" },
    title:{ zh:"è‰³ä¸½çš„å¹¸å­˜è€…", en:"The Vivid Survivor" },
    keywords:[{ zh:"è‰ºæœ¯", en:"Artistic" },{ zh:"æƒ…ç»ª", en:"Emotional" },{ zh:"çœŸå¿ƒ", en:"True-hearted" }],
    quote:{ zh:"â€œæˆ‘äº®è¿‡ï¼Œä¹Ÿç—›è¿‡ã€‚â€", en:'"Iâ€™ve shinedâ€”and Iâ€™ve hurt."' },
    desc:{ zh:"ä½ åƒä¸€åœºæ°¸è¿œä¸ä¼šé‡æ¼”çš„ç°åœºæ¼”å‡ºã€‚å¤–è¡¨é²œè‰³ã€è¯­æ°”è½»æ¾ï¼Œå¿ƒé‡Œå´è—ç€å¾ˆå¤šæ²¡äººçŸ¥é“çš„é»‘æ´ã€‚", en:"Like a live show that will never repeat. Bright on the outside, breezy in toneâ€”yet inside you carry black holes no one knows." },
    matchKey:"kiwi",
    matchLine:{ zh:"è‰³ä¸½ä¸å­¤ç‹¬çš„ç–—æ„ˆã€‚ä½ ä»¬äº’ç›¸æ‰¿è®¤å¯¹æ–¹çš„å¥‡æ€ªï¼Œä¹Ÿäº’ç›¸å®ˆæŠ¤å¯¹æ–¹çš„æ•æ„Ÿã€‚", en:"Healing for flamboyance and lonelinessâ€”you accept each otherâ€™s weirdness and protect each otherâ€™s sensitivity." }
  },
  orange:{
    img:"orange.jpg", icon:"ğŸŠ",
    name:{ zh:"æ©™å­äººæ ¼", en:"Orange" },
    artwork:{ zh:"ç”»ä½œã€Šæ©™äº¤ã€‹", en:"Artwork: â€œOrange Socialâ€" },
    title:{ zh:"å…ƒæ°”ä¹å¤©æ´¾", en:"The Sunny Optimist" },
    keywords:[{ zh:"é˜³å…‰", en:"Sunny" },{ zh:"æ©é¥°", en:"Masking" },{ zh:"æ´»åŠ›", en:"Energetic" }],
    quote:{ zh:"â€œæˆ‘çš„å¿«ä¹ï¼Œæ˜¯ä½ çš„å…‰ã€‚â€", en:'"My joy becomes your light."' },
    desc:{ zh:"ä½ æ˜¯æ‰€æœ‰äººå¿ƒé‡Œçš„å°å¤ªé˜³ã€‚ä½ ä¹ æƒ¯ç”¨ç¬‘å’Œæ®µå­æŒ¡ä½é»‘æš—ï¼Œä½†çœŸæ­£ç†è§£ä½ çš„äººå¹¶ä¸å¤šã€‚", en:"Everyoneâ€™s little sun. You use jokes to block the dark, but few people truly understand you." },
    matchKey:"watermelon",
    matchLine:{ zh:"å¿«ä¹å åŠ å¿«ä¹ã€‚ä½ ä»¬ä¼šä¸€èµ·æŠŠæ—¥å¸¸è¿‡æˆå¤å¤©ã€‚", en:"Joy plus joyâ€”youâ€™ll turn everyday life into summer." }
  },
  starfruit:{
    img:"starfruit.jpg", icon:"â­",
    name:{ zh:"æ¨æ¡ƒäººæ ¼", en:"Starfruit" },
    artwork:{ zh:"ç”»ä½œã€Šæ¨æ¡ƒä¹Ÿè®¸æ˜¯æˆ‘çš„è‡ªç”»åƒå§ã€‹", en:"Artwork: â€œMaybe Starfruit Is My Self-Portraitâ€" },
    title:{ zh:"å­¤ç‹¬çš„ç†æƒ³å®¶", en:"The Lonely Idealist" },
    keywords:[{ zh:"æ£±è§’", en:"Edgy" },{ zh:"ç‹¬ç‰¹", en:"Distinct" },{ zh:"æ´å¯Ÿ", en:"Insightful" }],
    quote:{ zh:"â€œæˆ‘æ˜¯æ˜Ÿæ˜Ÿçš„åˆ‡ç‰‡ã€‚â€", en:'"Iâ€™m a slice of a star."' },
    desc:{ zh:"ä½ æœ‰é”‹åˆ©çš„è¾¹ï¼Œä¹Ÿæœ‰æŸ”è½¯çš„å¿ƒã€‚ä½ çœ‹ç©¿å¾ˆå¤šè™šå‡ï¼Œåˆä¸æ„¿è½»æ˜“è¯´ç ´ï¼Œåªæ˜¯æ‚„æ‚„ä¿æŒè·ç¦»ã€‚", en:"Sharp edges, soft heart. You see through pretenses, but rarely call them outâ€”choosing quiet distance instead." },
    matchKey:"cherry",
    matchLine:{ zh:"æ£±è§’ä¸å…‰ç¯çš„æ‹¥æŠ±ã€‚ä½ ä»¬ä¸€ä¸ªè´Ÿè´£åšæ¢¦ï¼Œä¸€ä¸ªè´Ÿè´£æ‹†æ¢¦ã€‚", en:"Edges embracing the haloâ€”one dreams, the other deconstructs." }
  }
};

/* ================== æ¸²æŸ“ ================== */
const app = document.getElementById("content");

function renderLangToggle() {
  const zhActive = currentState.lang === "zh";
  const enActive = currentState.lang === "en";
  return `
    <div id="lang-toggle-root" class="fixed top-3 right-3 z-40">
      <div class="flex items-center rounded-full border border-white/18 bg-black/55 backdrop-blur-md overflow-hidden">
        <button onclick="setLang('zh')"
          class="px-3 py-1 text-[11px] ${zhActive ? "bg-white/15" : "hover:bg-white/10"}">
          ä¸­æ–‡
        </button>
        <button onclick="setLang('en')"
          class="px-3 py-1 text-[11px] ${enActive ? "bg-white/15" : "hover:bg-white/10"}">
          EN
        </button>
      </div>
    </div>
  `;
}

function ensureLangToggle() {
  const existed = document.getElementById("lang-toggle-root");
  if (existed) existed.remove();
  document.body.insertAdjacentHTML("beforeend", renderLangToggle());
}

function render() {
  app.innerHTML = "";
  ensureLangToggle();

  const tip = document.getElementById("wx-tip");
  if (tip) tip.innerHTML = pick(UI.wxTip);

  document.title = currentState.lang === "zh"
    ? "ä½ çš„æ°´æœäººæ ¼ç»é…æ˜¯è°ï¼Ÿ"
    : "Who Is Your Perfect Fruit Personality Match?";

  if (currentState.view === "start") renderStart();
  else if (currentState.view === "quiz") renderQuiz();
  else if (currentState.view === "loading") renderLoading();
  else if (currentState.view === "result") renderResult();
}

/* é¦–é¡µ */
function renderStart() {
  const thumbFruits = [
    { key: "peach", img: "peach.jpg" },
    { key: "lemon", img: "lemon.jpg" },
    { key: "orange", img: "orange.jpg" },
    { key: "kiwi", img: "kiwi.jpg" },
    { key: "pineapple", img: "pineapple.jpg" },
    { key: "pomegranate", img: "pomegranate.jpg" },
    { key: "starfruit", img: "starfruit.jpg" },
    { key: "watermelon", img: "watermelon.jpg" }
  ];

  app.innerHTML = `
    <div class="flex flex-col justify-between min-h-screen px-6 pt-10 pb-10 animate-fade-in">
      <header class="mb-4">
        <div class="text-[10px] tracking-[0.4em] opacity-70 mb-2">${pick(UI.brandLine)}</div>
        <h1 class="text-3xl font-bold leading-snug drop-shadow-[0_0_14px_rgba(255,160,80,0.9)]">
          ${pick(UI.heroTitle1)}<span class="text-orange-300">${pick(UI.heroTitle2)}</span><br/>${pick(UI.heroTitle3)}
        </h1>
      </header>

      <section class="mt-4 mb-8">
        <div class="w-full rounded-3xl border border-white/15 bg-black/35 backdrop-blur-md px-4 py-4">
          <div class="text-[11px] opacity-70 mb-3">${pick(UI.intro)}</div>
          <div class="flex items-center gap-3 overflow-x-auto pb-1">
            ${thumbFruits.map(f => `
              <div class="flex-shrink-0 w-12 h-12 rounded-full border border-white/40 overflow-hidden shadow-md">
                <img src="${f.img}" class="w-full h-full object-cover" />
              </div>
            `).join("")}
          </div>
        </div>
      </section>

      <section class="mb-6 text-[11px] opacity-65 leading-relaxed">
        ${pick(UI.hint)}
      </section>

      <footer class="flex flex-col items-center gap-4">
        <button onclick="startQuiz()"
          class="w-full max-w-[260px] py-3.5 bg-gradient-to-r from-orange-400 to-pink-500 rounded-full
                 font-bold text-lg shadow-[0_0_20px_rgba(255,165,0,0.55)]
                 hover:scale-105 transition-transform active:scale-95">
          ${pick(UI.btnStart)}
        </button>
        <div class="text-[10px] opacity-40 tracking-[0.25em]">${pick(UI.shareLine)}</div>
      </footer>
    </div>
  `;
}

/* ç­”é¢˜é¡µ */
function renderQuiz() {
  const q = questions[currentState.currentQ];
  const progress = ((currentState.currentQ + 1) / questions.length) * 100;

  app.innerHTML = `
    <div class="min-h-screen px-6 pt-6 pb-8 flex flex-col animate-fade-in">
      <div class="mb-4">
        <div class="flex justify-between items-center mb-2">
          <div class="text-xs tracking-[0.25em] opacity-70">${pick(UI.quizTag)}</div>
          <div class="text-[11px] opacity-70">${currentState.currentQ + 1} / ${questions.length}</div>
        </div>
        <div class="h-1 bg-white/10 rounded-full overflow-hidden">
          <div class="h-full bg-orange-400 transition-all duration-500 ease-out" style="width:${progress}%"></div>
        </div>
      </div>

      <div class="flex-1">
        <div class="mb-6">
          <div class="text-xs uppercase opacity-60 tracking-[0.24em] mb-1">
            ${pick(UI.qLabel)} ${currentState.currentQ + 1} ${pick(UI.qLabel2)}
          </div>
          <h2 class="text-2xl font-bold leading-relaxed drop-shadow-md">
            ${pick(q.question)}
          </h2>
        </div>

        <div class="space-y-4">
          ${q.options.map((opt, i) => `
            <button onclick="handleAnswer(${i})"
              class="w-full text-left p-5 rounded-2xl bg-black/45 border border-white/15
                     backdrop-blur-md hover:bg-white/10 hover:border-orange-400/60
                     transition-all active:scale-[0.97]">
              <span class="text-base opacity-90">${pick(opt.text)}</span>
            </button>
          `).join("")}
        </div>
      </div>

      <div class="mt-8 text-[11px] opacity-45 text-center leading-relaxed">
        ${pick(UI.tipQuick)}
      </div>
    </div>
  `;
}

/* Loading é¡µé¢ */
function renderLoading() {
  app.innerHTML = `
    <div class="min-h-screen bg-black flex flex-col items-center justify-center relative overflow-hidden">
      <div class="w-48 h-48 rounded-full bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500
                  blur-2xl opacity-70 animate-spin-slow"></div>
      <div class="absolute bottom-32 text-xs tracking-[0.5em] font-light text-white/80">
        ${pick(UI.loading)}
      </div>
    </div>
  `;
  setTimeout(() => { currentState.view = "result"; render(); }, 2800);
}

/* ç»“æœé¡µ */
function renderResult() {
  const res = currentState.finalResult;
  const matchRes = results[res.matchKey] || results.peach;

  app.innerHTML = `
    <div class="min-h-screen overflow-y-auto pb-32 animate-fade-in relative">
      <div class="px-6 pt-6 flex justify-between items-center opacity-80 text-[11px]">
        <span class="tracking-[0.28em]">FRUIT Â· UNIVERSE</span>
        <button onclick="location.reload()"
          class="px-2 py-1 rounded-full bg-white/8 border border-white/16">
          ${pick(UI.restart)}
        </button>
      </div>

      <div class="px-6 flex flex-col items-center mt-3">
        <div class="mt-3 text-sm tracking-[0.25em] text-orange-200/90 text-center">
          ${pick(UI.resultLead)}
        </div>

        <div class="w-64 h-64 rounded-full border-2 border-white/25 p-2 mb-6 mt-2 relative">
          <div class="w-full h-full rounded-full overflow-hidden shadow-[0_0_36px_rgba(255,255,250,0.32)]
                      bg-black flex items-center justify-center">
            <img src="${res.img}" class="w-full h-full object-cover" alt="${pick(res.name)}">
            <div class="absolute inset-0 bg-gradient-to-br from-black/5 via-transparent to-black/25"></div>
          </div>
          <div class="absolute -bottom-3 left-1/2 -translate-x-1/2 text-[11px] px-3 py-1 rounded-full
                      bg-black/70 border border-white/30 shadow-md">
            ${res.icon} ${pick(res.name)}
          </div>
        </div>

        <h1 class="text-3xl serif font-bold mb-1 text-center">${pick(res.title)}</h1>
        <div class="text-xs opacity-70 mb-4 text-center">${pick(res.artwork)}</div>

        <div class="flex flex-wrap justify-center gap-2 mb-8">
          ${res.keywords.map(k => `
            <span class="text-xs px-3 py-1 rounded-full border border-white/20 bg-white/6 text-orange-100">
              ${pick(k)}
            </span>
          `).join("")}
        </div>

        <div class="text-lg serif italic opacity-90 text-center mb-8 leading-relaxed max-w-xs">
          ${pick(res.quote)}
        </div>

        <div class="w-full bg-black/55 backdrop-blur-xl rounded-2xl p-6 border border-white/14 mb-10">
          <h3 class="text-[11px] opacity-60 uppercase tracking-wider mb-2">${pick(UI.analysisTitle)}</h3>
          <p class="text-sm leading-7 text-gray-100 text-justify">${pick(res.desc)}</p>
        </div>

        <div class="w-full bg-gradient-to-r from-indigo-900/70 to-purple-900/70
                    rounded-2xl p-6 border border-white/16 mb-10 relative overflow-hidden">
          <div class="absolute -right-16 -top-16 w-40 h-40 rounded-full bg-white/10 blur-3xl"></div>
          <div class="relative z-10 flex gap-4 items-center">
            <div class="w-16 h-16 rounded-full border border-white/30 overflow-hidden shadow-lg flex-shrink-0">
              <img src="${matchRes.img}" class="w-full h-full object-cover" alt="${pick(matchRes.name)}">
            </div>
            <div class="flex-1">
              <div class="text-[11px] uppercase opacity-60 tracking-[0.2em] mb-1">Soulmate Fruit</div>
              <div class="font-semibold mb-2">${pick(matchRes.name)}</div>
              <p class="text-xs opacity-90 leading-relaxed italic border-l-2 border-white/40 pl-3">
                ${pick(res.matchLine)}
              </p>
            </div>
          </div>
        </div>

        <div class="w-full bg-black/60 backdrop-blur-xl rounded-2xl p-6 border border-dashed border-white/25 mb-8">
          <div class="text-center mb-4">
            <div class="text-sm font-semibold mb-1">${pick(UI.joinTitle)}</div>
            <div class="text-[11px] opacity-70 leading-relaxed">${pick(UI.joinDesc)}</div>
          </div>
          <div class="flex justify-center">
            <img src="qr-fruit-universe.jpg" alt="Fruit Universe QR"
                 class="w-40 h-40 rounded-xl border border-white/40 bg-white object-contain">
          </div>
          <div class="mt-3 text-[11px] opacity-60 text-center">${pick(UI.joinTip)}</div>
        </div>

        <div class="w-full text-center text-[11px] opacity-55 pb-6 leading-relaxed">${pick(UI.footerShare)}</div>
      </div>
    </div>
  `;
}

/* ================== äº¤äº’é€»è¾‘ ================== */
function startQuiz() {
  currentState.view = "quiz";
  currentState.currentQ = 0;
  currentState.answers = [];
  currentState.finalResult = null;
  render();
}

function handleAnswer(i) {
  currentState.answers.push(i);
  if (currentState.currentQ < questions.length - 1) {
    currentState.currentQ++;
    render();
  } else {
    calculateResult();
    currentState.view = "loading";
    render();
  }
}

function calculateResult() {
  let scores = {};
  currentState.answers.forEach((choice, qIndex) => {
    questions[qIndex].options[choice].weights.forEach(f => {
      scores[f] = (scores[f] || 0) + 1;
    });
  });

  let max = Math.max(...Object.values(scores));
  let winners = Object.keys(scores).filter(f => scores[f] === max);
  currentState.finalResult = results[winners[Math.floor(Math.random() * winners.length)]];
}

/* å¾®ä¿¡ç¯å¢ƒæ£€æµ‹ï¼šåªåšæç¤º */
(function detectWeChat() {
  if (/micromessenger/.test(navigator.userAgent.toLowerCase())) {
    const tip = document.getElementById("wx-tip");
    if (tip) tip.classList.remove("hidden");
  }
})();

render();
</script>

</body>
</html>
